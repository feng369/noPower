<%
layout("/layouts/platform.html"){
%>
<header class="header navbar bg-white shadow">
    <div class="btn-group tool-button">
        <a class="btn btn-primary navbar-btn" href="${base}/platform/base/airmeterial" id="goBack" data-pjax><i class="ti-angle-left"></i>${msg['globals.button.back']}</a>
    </div>
</header>

<div class="content-wrap">
    <div class="wrapper" style="min-height:500px;">
        <section class="panel panel-form">
            <form id="editForm" role="form" class="form-horizontal parsley-form" data-parsley-validate
                  action="${base}/platform/base/airmeterial/editDo" method="post">
                <input name="id" type="hidden" value="${obj.id}">
                <div class="row mb10">
                    <div class="col-lg-12">
                        <div class="form-group">
                            <label for="meterialnum" class="col-sm-2 control-label">${msg['base.airmeterial.column.meterialnum']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="meterialnum" class="form-control" name="meterialnum" data-parsley-required="true" validate="true"
                                       placeholder="${msg['base.airmeterial.column.meterialnum']}" value="${obj.meterialnum}" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="meterialname" class="col-sm-2 control-label">${msg['base.airmeterial.column.meterialname']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="meterialname" class="form-control" name="meterialname" data-parsley-required="true" validate="true"
                                       placeholder="${msg['base.airmeterial.column.meterialname']}" value="${obj.meterialname}" >
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="meterialtypeid" class="col-sm-2 control-label">类型</label>

                            <div class="col-sm-8">
                                <select id="meterialtypeid" name="meterialtypeid" class="form-control">

                                </select>
                            </div>
                            <input type="hidden" id="meterialtypeId" name="meterialtypeId" value="<%if(!isEmpty(obj)){%>${obj.meterialtypeId}<%}%>">
                        </div>

                        <div class="form-group">
                            <label for="manufactor" class="col-sm-2 control-label">${msg['base.airmeterial.column.manufactor']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="manufactor" class="form-control" name="manufactor"  validate="true"
                                       placeholder="${msg['base.airmeterial.column.manufactor']}" value="${obj.manufactor}" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="meterialmodel" class="col-sm-2 control-label">${msg['base.airmeterial.column.meterialmodel']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="meterialmodel" class="form-control" name="meterialmodel"  validate="true"
                                       placeholder="${msg['base.airmeterial.column.meterialmodel']}" value="${obj.meterialmodel}" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="meteritalunit" class="col-sm-2 control-label">${msg['base.airmeterial.column.meteritalunit']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="meteritalunit" class="form-control" name="meteritalunit" validate="true"
                                       placeholder="${msg['base.airmeterial.column.meteritalunit']}" value="${obj.meteritalunit}" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="meteritalspec" class="col-sm-2 control-label">${msg['base.airmeterial.column.meteritalspec']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="meteritalspec" class="form-control" name="meteritalspec" data-parsley-required="false"
                                       placeholder="${msg['base.airmeterial.column.meteritalspec']}" value="${obj.meteritalspec}" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="meteritallength" class="col-sm-2 control-label">${msg['base.airmeterial.column.meteritallength']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="meteritallength" class="form-control" name="meteritallength"  validate="true"
                                       placeholder="${msg['base.airmeterial.column.meteritallength']}" value="${obj.meteritallength}" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="meteritalwidth" class="col-sm-2 control-label">${msg['base.airmeterial.column.meteritalwidth']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="meteritalwidth" class="form-control" name="meteritalwidth"  validate="true"
                                       placeholder="${msg['base.airmeterial.column.meteritalwidth']}" value="${obj.meteritalwidth}" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="meteritalhigh" class="col-sm-2 control-label">${msg['base.airmeterial.column.meteritalhigh']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="meteritalhigh" class="form-control" name="meteritalhigh"  validate="true"
                                       placeholder="${msg['base.airmeterial.column.meteritalhigh']}" value="${obj.meteritalhigh}" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="meteritalweight" class="col-sm-2 control-label">${msg['base.airmeterial.column.meteritalweight']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="meteritalweight" class="form-control" name="meteritalweight"  validate="true"
                                       placeholder="${msg['base.airmeterial.column.meteritalweight']}" value="${obj.meteritalweight}" >
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="ipack" class="col-sm-2 control-label">${msg['base.airmeterial.column.haspack']}</label>
                            <div class="col-sm-8">
                                <select id="ipack" name="ipack" class="form-control">

                                </select>
                            </div>
                            <input type="hidden" id="haspack" name="haspack" value="<%if(!isEmpty(obj)){%>${obj.haspack}<%}%>">
                        </div>

                        <div class="form-group">
                            <label for="capacity" class="col-sm-2 control-label">${msg['base.airmeterial.column.capacity']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="capacity" class="form-control" name="capacity"  validate="true"
                                       placeholder="${msg['base.airmeterial.column.capacity']}" value="${obj.capacity}" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="mincarrier" class="col-sm-2 control-label">${msg['base.airmeterial.column.mincarrier']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="mincarrier" class="form-control" name="mincarrier" data-parsley-type="integer"
                                       placeholder="${msg['base.airmeterial.column.mincarrier']}" value="<%if(!isEmpty(obj)){%>${obj.mincarrier}<%}%>" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="singlecarrynum" class="col-sm-2 control-label">${msg['base.airmeterial.column.singlecarrynum']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="singlecarrynum" class="form-control" name="singlecarrynum" data-parsley-type="float"
                                       placeholder="${msg['base.airmeterial.column.singlecarrynum']}" value="<%if(!isEmpty(obj)){%>${obj.singlecarrynum}<%}%>" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="singleloading" class="col-sm-2 control-label">${msg['base.airmeterial.column.singleloading']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="singleloading" class="form-control" name="singleloading" data-parsley-required="false"
                                       placeholder="${msg['base.airmeterial.column.singleloading']}" value="${obj.singleloading}" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="singleunloading" class="col-sm-2 control-label">${msg['base.airmeterial.column.singleunloading']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="singleunloading" class="form-control" name="singleunloading" data-parsley-required="false"
                                       placeholder="${msg['base.airmeterial.column.singleunloading']}" value="${obj.singleunloading}" >
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="vehicletypeid" class="col-sm-2 control-label">${msg['base.airmeterial.column.vehicletypeId']}</label>
                            <div class="col-sm-8">
                                <select id="vehicletypeid" name="vehicletypeid" class="form-control">

                                </select>
                            </div>
                            <input type="hidden" id="vehicletypeId" name="vehicletypeId" value="<%if(!isEmpty(obj)){%>${obj.vehicletypeId}<%}%>">
                        </div>

                        <div class="form-group">
                            <label for="iforklift" class="col-sm-2 control-label">${msg['base.airmeterial.column.hasforklift']}</label>
                            <div class="col-sm-8">
                                <select id="iforklift" name="iforklift" class="form-control">

                                </select>
                            </div>
                            <input type="hidden" id="hasforklift" name="hasforklift" value="<%if(!isEmpty(obj)){%>${obj.hasforklift}<%}%>">
                        </div>

                        <div class="form-group">
                            <label for="describ" class="col-sm-2 control-label">${msg['base.airmeterial.column.describ']}</label>
                            <div class="col-sm-8">
                                <input type="text" id="describ" class="form-control" name="describ" data-parsley-required="false"
                                       placeholder="${msg['base.airmeterial.column.describ']}" value="${obj.describ}" >
                            </div>
                        </div>

                    </div>
                </div>
                <div class="col-lg-3"></div>
                <div class="col-lg-6">
                    <div class="form-group text-center">
                        <label></label>

                        <div>
                            <button class="btn btn-primary btn-block btn-lg btn-parsley" data-loading-text="${msg['globals.button.submit.tip']}">${msg['globals.button.submit']}</button>
                        </div>
                    </div>
                </div>
            </form>
        </section>

    </div>
</div>
<script language="JavaScript">


    $(document).ready(function () {
        $("#mincarrier").val(parseInt("${obj.mincarrier}"));
        $("#singlecarrynum").val(parseFloat("${obj.singlecarrynum}"));
        $("#createT").val(dataformatint("${obj.createTime}"));

        bindVehicleDDL("航材类型","metType","meterialtypeid","meterialtypeId","${obj.meterialtypeId}");

        bindVehicleDDL("打包","packing","ipack","haspack","${obj.haspack}");

        bindVehicleDDL("配送使用车辆类型","vehicleType","vehicletypeid","vehicletypeId","${obj.vehicletypeId}");

        bindVehicleDDL("叉车","forklift","iforklift","hasforklift","${obj.hasforklift}");

        $("#meterialtypeid").on("change",function(){
            $("#meterialtypeId").val($(this).val());
        });

        $("#ipack").on("change",function(){
            $("#haspack").val($(this).val());
        });

        $("#vehicletypeid").on("change",function(){
            $("#vehicletypeId").val($(this).val());
        });

        $("#iforklift").on("change",function(){
            $("#hasforklift").val($(this).val());
        });



        $('#editForm').ajaxForm({
            dataType: 'json',
            beforeSubmit: function (arr, form, options) {
                form.find("button:submit").button("loading");
            },
            success: function (data, statusText, xhr, form) {
                if (data.code == 0) {
                    Toast.success(data.msg);
                    setTimeout(function () {
                        $("#goBack").trigger("click");
                    }, 1000);
                } else {
                    Toast.error(data.msg);
                }
                form.find("button:submit").button("reset");
            }
        });
    });
</script>
<%}%>